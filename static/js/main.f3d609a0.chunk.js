(this["webpackJsonpthree-nuts"]=this["webpackJsonpthree-nuts"]||[]).push([[0],{14:function(t,e,n){t.exports=n(24)},19:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){"use strict";n.r(e);var i=n(1),s=n.n(i),a=n(10),o=n.n(a),r=(n(19),n(2)),h=n(4),u=n(7),c=n(6),d=n(3),m=n(8),l=n(0),w=n(11),p=n(12),v=n(13),f=n.n(v),y=n(5),M=function(){function t(e,n){Object(r.a)(this,t),this.deltaVec=new l.ob(1,0,1),this.totalCount=0,this.count=0,this.cur=new l.ob,this.num=new l.ob,this.alternateRows=!0,this.num=n,this.deltaVec=e,this.totalCount=n.x*n.y*n.z}return Object(h.a)(t,[{key:"getPositions",value:function(){for(var t=[],e=0;e<this.totalCount;e++)t.push(this.getNextPosition());for(var n=t[this.totalCount-1].clone().divideScalar(2),i=0;i<this.totalCount;i++)t[i]=t[i].clone().sub(n),!0===this.alternateRows&&i%2===0&&(t[i]=t[i].clone().sub(new l.ob(0,0,this.deltaVec.z/2)));return t}},{key:"getNextPosition",value:function(){if(this.count++>this.totalCount)throw new Error("Maximum instances reached");var t=new l.ob;return t=this.deltaVec.clone().multiply(this.cur),++this.cur.x<this.num.x||(this.cur.x=0,this.cur.y++),this.cur.y<this.num.y||(this.cur.y=0,this.cur.z++),t}}]),t}();l.o.prototype.getMatrixAt=function(t){var e=[];return e[0]=this.instanceMatrix.array[16*t],e[1]=this.instanceMatrix.array[16*t+1],e[2]=this.instanceMatrix.array[16*t+2],e[3]=this.instanceMatrix.array[16*t+3],e};var b=function(){function t(e,n,i){Object(r.a)(this,t),this.scale=new l.ob(1,1,1),this.gapX=3,this.gapZ=4,this.meshes=[],this.qTweens=[],this.qTweensMap=[],this.posTweens=[],this.posTweensMap=[],this.dummy=new l.P,this.initialArrangement=[];var s=n.length?n:[n];this.amount=i.length,this.initialArrangement=i;for(var a=new l.n,o=0;o<s.length;o++){var h=s[o].geometry.clone(),u=new l.o(h,s[o].material.clone(),this.amount);a.add(u),this.meshes.push(u)}e.add(a)}return Object(h.a)(t,[{key:"setScale",value:function(t){this.scale=new l.ob(t,t,t);for(var e=0;e<this.meshes.length;e++){for(var n=0;n<this.amount;n++){var i=this.meshes[e].getMatrixAt(n);this.dummy.matrix.set(i),this.dummy.scale.set(this.scale.x,this.scale.y,this.scale.z),this.dummy.updateMatrix(),this.meshes[e].setMatrixAt(n,this.dummy.matrix)}this.meshes[e].instanceMatrix.needsUpdate=!0}}},{key:"setPositionTweens",value:function(t,e){this.posTweens=t,this.posTweensMap=[];for(var n=0;n<this.amount&&t.length>0;n++){var i=void 0;i=e?e[n]:Math.floor(50*Math.random())%t.length,this.posTweensMap.push(i)}}},{key:"setQuaternionTweens",value:function(t){this.qTweens=t,this.qTweensMap=[];for(var e=0;e<this.amount&&t.length>0;e++){var n=Math.floor(50*Math.random())%t.length;this.qTweensMap.push(n)}}},{key:"update",value:function(){if(this.initialArrangement.length!=this.amount)throw new Error("Instances number mismatch");for(var t=0;t<this.meshes.length;t++){for(var e=0;e<this.amount;e++){if(this.dummy.matrix.set(this.meshes[t].getMatrixAt(e)),this.dummy.updateMatrix(),this.posTweensMap.length>0){var n=this.initialArrangement[e].clone().add(this.posTweens[this.posTweensMap[e]].target);this.dummy.position.set(n.x,n.y,n.z)}if(this.qTweensMap.length>0){var i=this.qTweens[this.qTweensMap[e]].target;this.dummy.rotation.x=i.x,this.dummy.rotation.y=i.y,this.dummy.rotation.z=i.z}this.dummy.updateMatrix(),this.meshes[t].setMatrixAt(e,this.dummy.matrix)}this.meshes[t].instanceMatrix.needsUpdate=!0}}}]),t}(),g=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).TWEENS_NUM=30,n.ITEM_ROWS_NUM=18,n.ITEM_COLS_NUM=10,n.JUMP_HEIGHT=2,n.JUMP_DURATION=1e3,n.ROT_DURATION=2e3,n.PIXEL_RATIO_FACTOR=2,n.start=n.start.bind(Object(d.a)(n)),n.stop=n.stop.bind(Object(d.a)(n)),n.animate=n.animate.bind(Object(d.a)(n)),n}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;document.title="BUCK joe_ryba's art in threejs";var e=this.mount.clientWidth,n=this.mount.clientHeight,i=new l.bb,s=new l.R(22,e/n,.01,1e3);s.position.set(9.520364644833174,5.164962376737971,12.3515727526096),s.lookAt(0,0,0);var a=new l.b(2);i.add(a);var o=new l.rb({antialias:!0});o.setPixelRatio(window.devicePixelRatio/this.PIXEL_RATIO_FACTOR),o.setClearColor("#bbbbbb",1),o.setSize(e,n),this.scene=i,this.camera=s,this.renderer=o,this.mount.appendChild(this.renderer.domElement),(new w.a).load("nut.glb",(function(e){return t.onModelLoaded(e)}),void 0,(function(t){throw t}));var r=new l.S(16777215);r.position.set(8,50,-10),this.scene.add(r);var h=new l.S(16772863);h.position.set(2,50,10),this.scene.add(h),this.start(),this.orbitControl=new p.a(s,o.domElement),this.orbitControl.zoomSpeed=5,this.stats=new f.a,document.body.appendChild(this.stats.dom),window.addEventListener("resize",(function(){return t.onWindowResize()}),!1)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onModelLoaded",value:function(t){for(var e=new l.ob(this.ITEM_ROWS_NUM,1,this.ITEM_COLS_NUM),n=new l.ob(.65,0,2),i=new M(n,e).getPositions(),s=2*Math.PI/6,a=t.scene.children[0].children,o=0;o<a.length;o++)a[o].geometry.rotateX(Math.PI/2),a[o].geometry.rotateY(Math.PI/2),a[o].geometry.rotateX(s/2);this.models=new b(this.scene,a,i);for(var r=[],h=[],u=0;u<this.TWEENS_NUM;u++){var c=new l.ob,d=2e3*Math.random(),m=y.Tween.get(c,{loop:!0}).wait(d).to({y:this.JUMP_HEIGHT},this.JUMP_DURATION,y.Ease.quadInOut).wait(2e3).to({y:0},this.JUMP_DURATION,y.Ease.quadInOut).wait(2e3-d);r.push(m);var w=new l.j,p=y.Tween.get(w,{loop:!0}).wait(1500).to({x:4*s},this.ROT_DURATION,y.Ease.getBackInOut(.5)).wait(1500-d);m.duration>p.duration&&p.wait(m.duration-p.duration),h.push(p)}this.models.setPositionTweens(r),this.models.setQuaternionTweens(h)}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"animate",value:function(){this.stats.begin(),this.renderScene(),this.models&&this.models.update(),this.orbitControl.update(),this.stats.end(),this.frameId=window.requestAnimationFrame(this.animate)}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{style:{width:"100%",height:"100vh",overflow:"hidden"},ref:function(e){t.mount=e}})}}]),e}(s.a.Component);n(23);var T=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(g,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[14,1,2]]]);
//# sourceMappingURL=main.f3d609a0.chunk.js.map